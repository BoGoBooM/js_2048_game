const e=document.querySelector(".button"),t=document.querySelector(".message-win"),r=document.querySelector(".message-lose"),n=document.querySelector(".message-start"),l=document.querySelector(".game-score"),o=document.querySelectorAll(".field-cell");let c=0,s=Array.from({length:4},()=>[,,,,].fill(0));function a(){c=0,l.textContent=c,t.classList.add("hidden"),r.classList.add("hidden"),n.classList.remove("hidden"),function(){let e=[];s.forEach((t,r)=>{t.forEach((t,n)=>{e.push({row:r,col:n})})}),e.forEach(e=>{let{row:t,col:r}=e;s[t][r]=0})}()}function i(){let e=[];if(s.forEach((t,r)=>{t.forEach((t,n)=>{0===t&&e.push({row:r,col:n})})}),e.length>0){let{row:t,col:r}=e[Math.floor(Math.random()*e.length)];s[t][r]=.9>Math.random()?2:4,f()}}function f(){s.forEach((e,t)=>{e.forEach((e,r)=>{let n=o[4*t+r];n.textContent=e>0?e:"",n.className=`field-cell field-cell--${e}`})})}function d(e){let n=!1;function o(){s=s[0].map((e,t)=>s.map(e=>e[t])).reverse()}function a(e){let t=e.filter(e=>0!==e),r=[];for(let e=0;e<t.length;e++)if(e<t.length-1&&t[e]===t[e+1]){let n=2*t[e];r.push(n),c+=n,e++}else r.push(t[e]);for(;r.length<e.length;)r.push(0);return r}switch(e){case"up":o();for(let e=0;e<4;e++){let t=a(s[e]);n||u(t,s[e])||(n=!0),s[e]=t}o(),o(),o();break;case"down":o(),o(),o();for(let e=0;e<4;e++){let t=a(s[e]);n||u(t,s[e])||(n=!0),s[e]=t}o();break;case"left":for(let e=0;e<4;e++){let t=a(s[e]);n||u(t,s[e])||(n=!0),s[e]=t}break;case"right":o(),o();for(let e=0;e<4;e++){let t=a(s[e]);n||u(t,s[e])||(n=!0),s[e]=t}o(),o()}n&&(f(),l.textContent=c,i(),s.flat().includes(2048)&&t.classList.remove("hidden"),!function(){for(let e=0;e<4;e++)for(let t=0;t<4;t++)if(0===s[e][t]||t<3&&s[e][t]===s[e][t+1]||e<3&&s[e][t]===s[e+1][t])return!0;return!1}()&&r.classList.remove("hidden"))}function u(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}document.addEventListener("keydown",e=>{if(e.preventDefault(),n.classList.contains("hidden"))switch(e.key){case"ArrowUp":d("up");break;case"ArrowDown":d("down");break;case"ArrowLeft":d("left");break;case"ArrowRight":d("right")}}),e.addEventListener("click",function(){a(),e.classList.remove("start"),e.classList.add("restart"),e.textContent="Restart",n.classList.add("hidden"),i(),i()}),a();
//# sourceMappingURL=index.32c0be6f.js.map
